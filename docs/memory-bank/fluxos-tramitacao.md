# üèõÔ∏è Fluxos de Tramita√ß√£o Parlamentar - Sistema Completo

## üéØ **Vis√£o Geral do Sistema de Tramita√ß√£o**

Este documento mapeia o **fluxo completo de tramita√ß√£o parlamentar** com todos os setores, estados, transi√ß√µes e processos t√©cnicos necess√°rios para implementa√ß√£o no sistema Next.js.

### üìä **Estados Principais do Sistema**
```mermaid
stateDiagram-v2
    [*] --> DRAFT_INITIATED
    DRAFT_INITIATED --> UNDER_FORMAL_REVIEW
    UNDER_FORMAL_REVIEW --> COMMITTEE_ASSIGNED
    UNDER_FORMAL_REVIEW --> PENDING_CORRECTIONS
    UNDER_FORMAL_REVIEW --> REJECTED_PRELIMINARY
    COMMITTEE_ASSIGNED --> IN_COMMITTEE_REVIEW
    IN_COMMITTEE_REVIEW --> READY_FOR_PLENARY
    IN_COMMITTEE_REVIEW --> COMMITTEE_REJECTED
    READY_FOR_PLENARY --> IN_PLENARY_DISCUSSION
    IN_PLENARY_DISCUSSION --> IN_VOTING
    IN_VOTING --> APPROVED_PLENARY
    IN_VOTING --> REJECTED_PLENARY
    APPROVED_PLENARY --> IN_REVIEWING_HOUSE
    IN_REVIEWING_HOUSE --> SENT_TO_EXECUTIVE
    SENT_TO_EXECUTIVE --> UNDER_EXECUTIVE_REVIEW
    UNDER_EXECUTIVE_REVIEW --> SANCTIONED
    UNDER_EXECUTIVE_REVIEW --> PARTIALLY_VETOED
    UNDER_EXECUTIVE_REVIEW --> TOTALLY_VETOED
    SANCTIONED --> PROMULGATED
    PROMULGATED --> PUBLISHED_ACTIVE
```

---

## 1. **FASE DE CRIA√á√ÉO E RECEP√á√ÉO**

### 1.1 Portal de Entrada (Document Ingestion Service)
**Estado Inicial**: `DRAFT_INITIATED`

**Setores Envolvidos**:
- **Protocolo Geral**: Primeira recep√ß√£o e numera√ß√£o sequencial
- **Assessoria de Reda√ß√£o Legislativa**: Valida√ß√£o t√©cnica inicial
- **Secretaria de Comiss√µes**: Distribui√ß√£o tem√°tica

**Processo T√©cnico**:
```typescript
interface DocumentSubmissionEvent {
  event: 'DocumentSubmitted'
  payload: {
    documentId: string
    authorId: string
    documentType: PropositionType
    content: AkomaNtosoDocument
    metadata: DocumentMetadata
  }
  validations: {
    formatCompliance: boolean
    authorityValidation: boolean
    thematicClassification: string[]
    autoGeneratedId: string
  }
}
```

**Fun√ß√µes dos Setores**:
- **Protocolo**: Registro temporal, numera√ß√£o, valida√ß√£o de autoria
- **Reda√ß√£o**: An√°lise de conformidade t√©cnica, sugest√µes de estrutura
- **Secretaria**: Routing para comiss√£o competente baseado em regras de neg√≥cio

**Transi√ß√£o de Estado**: `DRAFT_INITIATED` ‚Üí `UNDER_FORMAL_REVIEW`

### 1.2 An√°lise Preliminar (Legal Review Service)
**Estado**: `UNDER_FORMAL_REVIEW`

**Setores Envolvidos**:
- **Consultoria Jur√≠dica**: An√°lise constitucional e legal
- **Assessoria T√©cnica**: Verifica√ß√£o de impacto or√ßament√°rio
- **Secretaria da Mesa**: Verifica√ß√£o de compet√™ncia e tramita√ß√£o

**Processo T√©cnico**:
```typescript
interface LegalReviewWorkflow {
  parallelAnalysis: {
    juridicalReview: ConstitutionalAnalysis
    technicalReview: BudgetaryImpactAnalysis
    administrativeReview: CompetenceVerification
  }
  businessRules: AdmissibilityRules
  decision: 'APPROVED' | 'REJECTED' | 'REQUIRES_CORRECTIONS'
  consolidatedOpinion: ReviewConsolidation
}
```

**Crit√©rios de Valida√ß√£o**:
- Constitucionalidade (an√°lise autom√°tica + manual)
- Compet√™ncia legislativa
- Impacto or√ßament√°rio
- T√©cnica legislativa
- Precedentes e jurisprud√™ncia

**Poss√≠veis Transi√ß√µes**:
- `UNDER_FORMAL_REVIEW` ‚Üí `COMMITTEE_ASSIGNED` (aprovado)
- `UNDER_FORMAL_REVIEW` ‚Üí `PENDING_CORRECTIONS` (dilig√™ncias)
- `UNDER_FORMAL_REVIEW` ‚Üí `REJECTED_PRELIMINARY` (rejeitado)

---

## 2. **FASE DE COMISS√ïES**

### 2.1 Distribui√ß√£o e Atribui√ß√£o (Committee Assignment Service)
**Estado**: `COMMITTEE_ASSIGNED`

**Setores Envolvidos**:
- **Secretaria de Comiss√µes**: Coordena√ß√£o geral
- **Secretarias Espec√≠ficas**: Por √°rea tem√°tica (CCJ, CDHM, CFT, etc.)
- **Assessoria de Plen√°rio**: Agenda e cronograma

**Processo T√©cnico**:
```typescript
interface CommitteeRouter {
  thematicClassification: NLPClassification
  distributionRules: {
    primaryCompetence: CommitteeType[]
    crossCompetence: CommitteeType[]
    workloadBalance: WorkloadMetrics
    deadlineCompliance: RegimentalDeadlines
  }
  conflictVerification: UrgencyPriorityCheck
  automaticScheduling: AgendaScheduler
  multiChannelNotification: NotificationService
}

type CommitteeType = 
  | 'CCJ'     // Constitui√ß√£o e Justi√ßa
  | 'CDHM'    // Direitos Humanos
  | 'CFT'     // Finan√ßas e Tributa√ß√£o
  | 'CEDU'    // Educa√ß√£o
  | 'CSAUDE'  // Sa√∫de
  | 'CMEIO'   // Meio Ambiente
  // ... outras comiss√µes
```

**Algoritmo de Distribui√ß√£o**:
- Compet√™ncia tem√°tica prim√°ria
- Compet√™ncia conexa (an√°lise cruzada)
- Capacidade operacional
- Prazos regimentais
- Prioridades pol√≠ticas

### 2.2 An√°lise em Comiss√£o (Committee Review Service)
**Estado**: `IN_COMMITTEE_REVIEW`

**Setores Envolvidos**:
- **Secretaria da Comiss√£o**: Suporte administrativo e processual
- **Consultoria Legislativa**: Estudos t√©cnicos especializados
- **Assessoria de Imprensa**: Comunica√ß√£o e transpar√™ncia
- **Taquigrafia**: Registro de debates e vota√ß√µes

**Fluxo Detalhado**:
```typescript
interface CommitteeWorkflow {
  phases: {
    reception: {
      rapporteurAssignment: RapporteurAssignment
      amendmentPeriodOpen: AmendmentPeriod
      agendaPublication: AgendaItem
    }
    amendmentPhase: {
      amendmentReception: Amendment[]
      admissibilityAnalysis: AdmissibilityCheck[]
      substitutiveConsolidation: SubstitutiveDocument
    }
    rapporteurship: {
      opinionElaboration: RapporteurOpinion
      meritAnalysis: MeritAnalysis
      recommendationProposal: VotingRecommendation
    }
    discussionVoting: {
      reportPresentation: ReportPresentation
      singleTurnDiscussion: Discussion
      voting: CommitteeVoting
      minutesDrafting: OfficialMinutes
    }
    forwarding: {
      toOtherCommittees?: CommitteeForwarding
      toPlenarySession?: PlenaryForwarding
      toArchive?: ArchiveDecision
    }
  }
}
```

**Estados Intermedi√°rios**:
- `UNDER_RAPPORTEUR_ANALYSIS`
- `AMENDMENT_PERIOD_OPEN`
- `AMENDMENT_PERIOD_CLOSED`
- `COMMITTEE_DISCUSSION`
- `COMMITTEE_VOTING`
- `COMMITTEE_APPROVED`
- `COMMITTEE_REJECTED`

### 2.3 Gest√£o de Emendas (Amendment Management Service)
**Sistema Especializado**: Controle de vers√µes e merge de altera√ß√µes

**Processo T√©cnico**:
```typescript
interface AmendmentEngine {
  versionControl: GitLikeDocumentControl
  conflictDetection: OverlapAnalysis
  semanticAnalysis: ChangeImpactAnalysis
  autoMerge: CompatibleAmendmentMerger
  manualReview: ConflictResolver
  substitutiveGeneration: SubstitutiveBuilder
}

type AmendmentType = 
  | 'SUPRESSIVA'     // Remo√ß√£o de texto
  | 'SUBSTITUTIVA'   // Altera√ß√£o de texto
  | 'ADITIVA'        // Acr√©scimo de texto
  | 'MODIFICATIVA'   // Altera√ß√£o parcial
  | 'AGLUTINATIVA'   // Combina√ß√£o de emendas
```

---

## 3. **FASE DE PLEN√ÅRIO**

### 3.1 Prepara√ß√£o para Plen√°rio (Plenary Preparation Service)
**Estado**: `READY_FOR_PLENARY`

**Setores Envolvidos**:
- **Secretaria-Geral da Mesa**: Organiza√ß√£o da pauta
- **Departamento de Taquigrafia**: Prepara√ß√£o para registro
- **Assessoria de Plen√°rio**: Log√≠stica e procedimentos
- **Coordena√ß√£o de Comunica√ß√£o**: Transmiss√£o e publicidade

**Atividades**:
```typescript
interface PlenaryPreparation {
  quorumVerification: QuorumCheck
  agendaOrganization: OrderOfTheDay
  materialPreparation: {
    reports: CommitteeReports[]
    amendments: Amendment[]
    opinions: TechnicalOpinions[]
  }
  votingSystemSetup: VotingSystemConfig
  speakerScheduling: SpeakerSchedule
}
```

### 3.2 Discuss√£o em Plen√°rio (Plenary Discussion Service)
**Estado**: `IN_PLENARY_DISCUSSION`

**Processo Regrado**:
```typescript
interface PlenaryWorkflow {
  firstDiscussion: {
    focus: 'GENERALITIES'
    committeeReport: ReportPresentation
    meritDiscussion: MeritDebate
    votingEncouragement: VotingEncouragement
  }
  secondDiscussion: {
    focus: 'SPECIFICITIES'
    articleByArticle: ArticleByArticleReview
    plenaryAmendments: PlenaryAmendment[]
    highlights: HighlightedItems[]
  }
  finalVoting: {
    globalVoting: GlobalVote
    quorumVerification: FinalQuorumCheck
    resultProclamation: VotingResult
  }
}
```

### 3.3 Sistema de Vota√ß√£o (Voting Management Service)
**Estado**: `IN_VOTING`

**Arquitetura T√©cnica**:
```typescript
interface VotingSystem {
  terminals: ElectronicVotingTerminal[]
  authentication: BiometricAuth
  realTimeCount: RealTimeVoteCounter
  blockchainRecord: ImmutableVoteRecord
  liveDashboard: LiveResultsDashboard
  quorumVerification: AutomaticQuorumVerifier
}

type VotingType = 
  | 'SIMBOLICA'   // Manifesta√ß√£o simples
  | 'NOMINAL'     // Registro individual
  | 'SECRETA'     // Prote√ß√£o do voto
  | 'ELETRONICA'  // Sistema automatizado

type VotingResult = 
  | 'APPROVED_PLENARY'      // Segue tramita√ß√£o
  | 'REJECTED_PLENARY'      // Arquivo
  | 'RETURNED_TO_COMMITTEE' // Nova an√°lise
```

---

## 4. **FASE BICAMERAL (Sistema Bicameral)**

### 4.1 Tramita√ß√£o na Casa Revisora
**Estado**: `IN_REVIEWING_HOUSE`

**Fluxo Espelhado**:
```typescript
interface BicameralFlow {
  formalReception: DocumentReception
  committeeDistribution: CommitteeAssignment
  technicalAnalysis: TechnicalReview
  discussionVoting: ReviewHouseVoting
  possibilities: {
    approvedWithoutChanges: () => 'SENT_TO_EXECUTIVE'
    approvedWithChanges: () => 'RETURNED_TO_INITIATING_HOUSE'
    rejected: () => 'REJECTED_REVIEWING_HOUSE'
  }
}
```

### 4.2 Resolu√ß√£o de Conflitos (Bicameral Resolution Service)
**Estado**: `BICAMERAL_CONFLICT`

**Mecanismos**:
```typescript
interface ConflictResolution {
  divergenceAnalysis: DivergenceMapping
  jointCommittee?: JointCommitteeProcess
  politicalNegotiation: NegotiationProcess
  finalVoting: InitiatingHouseFinalVote
}
```

---

## 5. **FASE EXECUTIVA**

### 5.1 Encaminhamento ao Executivo (Executive Submission Service)
**Estado**: `SENT_TO_EXECUTIVE`

**Setores Envolvidos**:
- **Secretaria-Geral**: Autentica√ß√£o e encaminhamento
- **Protocolo do Executivo**: Recep√ß√£o formal
- **Casa Civil**: Coordena√ß√£o da an√°lise

### 5.2 An√°lise Executiva (Executive Review Service)
**Estado**: `UNDER_EXECUTIVE_REVIEW`

**Processo**:
```typescript
interface ExecutiveAnalysis {
  constitutionalityAnalysis: AGUAnalysis
  meritAnalysis: MinistryAnalysis[]
  impactAnalysis: EconomicImpactAnalysis
  consolidatedOpinion: CasaCivilOpinion
  presidentialDecision: PresidentialDecision
}

type PresidentialDecision = 
  | 'SANCTIONED'        // Promulga√ß√£o
  | 'PARTIALLY_VETOED'  // Veto parcial
  | 'TOTALLY_VETOED'    // Veto total
  | 'TACIT_SANCTION'    // San√ß√£o t√°cita (15 dias)
```

---

## 6. **FASE DE FINALIZA√á√ÉO**

### 6.1 Promulga√ß√£o e Publica√ß√£o (Publication Service)
**Estado**: `PROMULGATED`

**Setores Envolvidos**:
- **Secretaria de Editora√ß√£o**: Formata√ß√£o final
- **Di√°rio Oficial**: Publica√ß√£o oficial
- **Portal da Transpar√™ncia**: Disponibiliza√ß√£o p√∫blica
- **Arquivo Nacional**: Preserva√ß√£o hist√≥rica

### 6.2 Controle de Constitucionalidade (Judicial Review Tracking)
**Estado**: `PUBLISHED_ACTIVE`

**Monitoramento**:
```typescript
interface ConstitutionalityControl {
  adi: ADITracking  // A√ß√£o Direta de Inconstitucionalidade
  adc: ADCTracking  // A√ß√£o Declarat√≥ria de Constitucionalidade
  adpf: ADPFTracking // Argui√ß√£o de Descumprimento
}
```

---

## 7. **ESTADOS TERMINAIS E ESPECIAIS**

### 7.1 Estados de Arquivo
```typescript
type ArchiveStates = 
  | 'REJECTED_PRELIMINARY'
  | 'REJECTED_COMMITTEE'
  | 'REJECTED_PLENARY'
  | 'VETOED_TOTALLY'
  | 'UNCONSTITUTIONAL'
```

### 7.2 Estados de Suspens√£o
```typescript
type SuspensionStates = 
  | 'SUSPENDED_COURT_ORDER'
  | 'SUSPENDED_POLITICAL'
  | 'SUSPENDED_PROCEDURAL'
```

### 7.3 Estados de Transforma√ß√£o
```typescript
type TransformationStates = 
  | 'TRANSFORMED_INTO_LAW'
  | 'INCORPORATED_INTO_OTHER_PROJECT'
  | 'SUPERSEDED_BY_NEW_PROJECT'
```

---

## 8. **INTEGRA√á√ÉO E NOTIFICA√á√ïES**

### 8.1 Event Bus Architecture
```typescript
interface EventBus {
  events: {
    StateTransitionEvent: StateTransition
    WorkflowProgressEvent: WorkflowProgress
    DeadlineWarningEvent: DeadlineWarning
    UserActionEvent: UserAction
    SystemStatusEvent: SystemStatus
  }
}
```

### 8.2 Notification Matrix
```typescript
interface NotificationMatrix {
  stakeholders: {
    autor: NotificationLevel.ALL_TRANSITIONS
    relator: NotificationLevel.ASSIGNMENT_AND_COMMITTEE_STATUS
    presidenteComissao: NotificationLevel.ENTRY_AND_DEADLINES
    lideranca: NotificationLevel.VOTING_AND_RESULTS
    publico: NotificationLevel.PUBLIC_STATES_AND_PUBLICATIONS
    imprensa: NotificationLevel.PUBLIC_INTEREST_EVENTS
  }
}
```

---

## 9. **M√âTRICAS E MONITORAMENTO**

### 9.1 KPIs do Sistema
```typescript
interface SystemKPIs {
  timeMetrics: {
    averageTimePerPhase: PhaseTimeMetrics
    approvalRateByType: ApprovalRateMetrics
    efficiencyByCommittee: CommitteeEfficiencyMetrics
  }
  participationMetrics: {
    amendmentVolume: AmendmentVolumeMetrics
    citizenParticipation: CitizenParticipationMetrics
  }
}
```

### 9.2 Alertas Automatizados
```typescript
interface AutomatedAlerts {
  deadlineWarnings: DeadlineAlert[]
  quorumInsufficient: QuorumAlert[]
  scheduleConflicts: ScheduleConflictAlert[]
  committeeOverload: OverloadAlert[]
  processAnomalies: AnomalyAlert[]
}
```

---

**Este fluxo garante**:
- ‚úÖ **Rastreabilidade completa** de todas as etapas
- ‚úÖ **Compliance regulat√≥rio** com normas parlamentares
- ‚úÖ **Efici√™ncia operacional** atrav√©s de automa√ß√£o inteligente
- ‚úÖ **Integra√ß√£o sist√™mica** entre todos os setores
- ‚úÖ **Transpar√™ncia total** para todos os stakeholders

**Implementa√ß√£o**: Este fluxo ser√° a base para o desenvolvimento dos workflows, estados e APIs do sistema Next.js de tramita√ß√£o parlamentar. 